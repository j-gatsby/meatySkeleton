Based on code from http://wiki.osdev.org/Meaty_Skeleton
